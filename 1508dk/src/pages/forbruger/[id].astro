---
import Layout from "../../layouts/Layout.astro";

export async function getStaticPaths() {
  const response = await fetch(
    "https://psrgynkdjbtmjvkknaxn.supabase.co/rest/v1/eksamen02",
    {
      method: "GET",
      headers: {
        apikey:
          "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBzcmd5bmtkamJ0bWp2a2tuYXhuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUyNjUyNTAsImV4cCI6MjA4MDg0MTI1MH0.H9E4wrsWRfXjxCAiNJyPnjx6OMBcxZOZLQe_9ypkLdk",
      },
    }
  );
  const data = await response.json();

  return data.map((post) => {
    return {
      params: { id: String(post.id) },
      props: { post },
    };
  });
}

const { post } = Astro.props;

---

<Layout>
  <!--    VELKOMMEN NAVN  -->

  <section>
    <div class="top-section">
      <div class="welcome">
        <h2>Velkommen,</h2>
        <h3 class="welcome-name">{post.name}</h3>
      </div>
      <a class="cta-black" href="#greenpasslink">se dit green pass</a>
    </div>

    <div class="welcome-intro">
      <h3 class="login-quote">{post.quote}</h3>
      <p class="login-text">{post.quote_p}</p>
    </div>

    <section class="graph-section">
      <div class="title-and-graph">
        <p class="p-bold">FORBRUGSPOST</p>
        <p class="p-bold">FØDEVARER</p>
        <img src={post.graph1} alt="" />
      </div>
      <div class="title-and-graph">
        <p class="p-bold">FORBRUGSPOST</p>
        <p class="p-bold">TØJ, SKO & ACCESSORIES</p>
        <img src={post.graph2} alt="" />
      </div>
      <div class="title-and-graph">
        <p class="p-bold">FORBRUGSPOST</p>
        <p class="p-bold">MEST BESØGTE BUTIKKER</p>
        <img src={post.graph3} alt="" />
      </div>
    </section>
    <div class="info-text">
      <p>
        Infografikken ovenover er med til at give et overblik over forbrug,
        visualiseret på forskellige poster og butikker. Du kan sammenligne dit
        forbrug med samme måned sidste år, og få et indblik i dine største
        forbrugsposter.
      </p>
    </div>
  </section>

  <!--   /* LOGIN MORE INFO SECTION */ -->

  <section class="login-green-more-info-section">
    <img class="dankort-hand" src="/index-hero.webp" alt="" />
    <section class="green-section-info-texts">
      <div class="text-and-arrow1">
        <div>
          <p class="p-bold">Forbruger du mere eller mindre end dine venner?</p>
          <p class="under-title">Tjek, om du forbruger mere end andre.</p>
        </div>
        <img class="arrow-icon" src="/iconarrow.png" alt="" />
      </div>
      <div class="text-and-arrow">
        <div>
          <p class="p-bold">Hold øje med dit forbrug hos Forbrugstjekkeren</p>
          <p class="under-title">
            Kontrollér dit faktiske og forventede forbrug.
          </p>
        </div>
        <img class="arrow-icon" src="/iconarrow.png" alt="" />
      </div>
    </section>
  </section>

  <!--   /* FORBRUGSRECAP */ -->

  <section class="recap-section">
    <h2>Dit 2025 forbrugs-recap</h2>
    <section class="recap-cards-section">
      <div class="slider-div-videos">
        <video class="card fade" src={post.card1} autoplay muted loop alt="" />
        <video class="card fade" src={post.card2} autoplay muted loop alt="" />
        <video class="card fade" src={post.card3} autoplay muted loop alt="" />
        <video class="card fade" src={post.card4} autoplay muted loop alt="" />
        <video class="card fade" src={post.card5} autoplay muted loop alt="" />
        <video class="card fade" src={post.card6} autoplay muted loop alt="" />
        <video class="card fade" src={post.card7} autoplay muted loop alt="" />
        <video class="card fade" src={post.card8} autoplay muted loop alt="" />
      </div>
 <a class="prev" >&#10094;</a>
  <a class="next" >&#10095;</a>
    </section>
  </section>

  <!--   /* GREEN PASS */ -->

  <section class="green-section" id="greenpasslink">
    <section class="grey-section">
      <div class="title-qr-code-and-saldo">
        <h3>MIT</h3>
        <h1>GREEN PASS</h1>
        <img class="qr-code" src="/public/qr_code.png" alt="en QR kode" />
        <div class="point-saldo-and-illustration">
          <h3>Pointsaldo:</h3>
          <h3 class="point-saldo">{post.greensaldo}</h3>
        </div>
        <img
          class="green-graph"
          src={post.greengraph}
          alt="en illustration af pointsaldo"
        />
      </div>
      <div class="sewing-machine-and-buttons">
        <img
          class="sewing-machine"
          src="/public/sewing-machine.png"
          alt="et billede af en symaskine"
        />
        <button class="cta-black">LÆS MERE</button>
        <button class="cta-black">DONÈR DINE POINT</button>
      </div>
    </section>
  </section>
</Layout>

<style>
  body {
    background-color: var(--primary-color);
  }

  /* VELKOMMEN NAVN */
  .top-section {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    margin-top: 2em;
    padding: 1em 5em;
  }

  .welcome {
    display: flex;
  }

  .welcome-intro {
    margin: 5em;
  }

  .graph-section {
    background-color: var(--tertiary-color);
    margin: 5em;
    padding: 1em 5em;
    display: flex;
    justify-content: space-between;
    flex-wrap: wrap;
  }

  .info-text {
    max-width: 800px;
    margin: 5em;
  }

  .cta-black {
    align-self: flex-end;
  }

  .welcome-name {
    font-size: var(--h2-font-size);
    padding-top: 5px;
    margin-left: 0.5em;
  }

  h3 {
    text-transform: none;
    font-size: 32px;
  }

  /* LOGIN MORE INFO SECTION */

  .login-green-more-info-section {
    background-color: var(--secondary-color);
    display: flex;
    flex-wrap: wrap;
    justify-content: space-evenly;
    color: var(--white-color);
    padding: 2em;
  }

  .green-section-info-texts {
    margin: auto;
    border-bottom: 2px solid var(--white-color);
    border-top: 2px solid var(--white-color);
    padding-bottom: 2em;
  }
  .dankort-hand {
    margin: auto;
    width: auto;
  }

  .text-and-arrow,
  .text-and-arrow1 {
    display: flex;
    max-width: 500px;
    justify-content: space-between;
    margin-top: 2em;
    padding: 0em 2em;
  }

  .text-and-arrow1 {
    border-bottom: 2px solid var(--white-color);
    padding-bottom: 2em;
  }
  .p-bold {
    font-size: var(--p-font-size);
  }

  .arrow-icon {
    width: auto;
    height: 32px;
  }

  /* FORBRUGSRECAP */

  .recap-section {
    text-align: center;
    margin: 5em;
  }

  .recap-cards-section {
    margin-top: 3em;
    display: flex;
    justify-content: center;
    position: relative;
  }

  .slider-div-videos{
    display: flex;
    width: 100%;
    max-width: 300px;
    overflow-x: auto;
  }
  video{
    flex: 0 0 300px;
    width: 300px;
    height: auto;
    object-fit: cover;
  display: block;
  }

  .card{
      display: block;
  }

  .prev, .next {
  cursor: pointer;
  position: absolute;
  top: 50%;
  width: auto;
  margin-top: -22px;
  padding: 16px;
  color: white;
  font-weight: bold;
  font-size: 18px;
  transform: translateY(-50%);
  transition: 0.6s ease;
  border-radius: 0 3px 3px 0;
  user-select: none;
  background-color: rgba(0, 0, 0, 0.5);
  }

/*   .next {
  right: 0;
  border-radius: 3px 0 0 3px;
  } */

  .prev { left: 8px; }
.next { right: 8px; }

  .prev:hover, .next:hover {
  background-color: rgba(0,0,0,0.8)
  }

  .fade {
  animation-name: fade;
  animation-duration: 1.5s;
}

@keyframes fade {
  from {opacity: .4}
  to {opacity: 1}
}

  /* GREEN PASS */

  .green-section {
    background-color: var(--secondary-color);
    padding: 3em;
  }

  .grey-section {
    background-color: var(--tertiary-color);
    display: flex;
    flex-wrap: wrap;
    justify-content: space-around;
    border-radius: 10px;
    padding: 3em;
  }

  .title-qr-code-and-saldo {
    text-align: center;
  }

  .point-saldo-and-illustration {
    display: flex;
    justify-content: center;
    padding-bottom: 2em;
  }
  .sewing-machine-and-buttons {
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  button {
    margin: auto;
  }

  h1 {
    color: var(--secondary-color);
  }

  .point-saldo {
    font-family: WorkSans-Italic;
    text
  }
  img {
    max-width: 100%;
  }
</style>

<script>
  let scrollContainer = document.querySelector(".slider-div-videos");
let backButton = document.querySelector(".prev");
let nextButton = document.querySelector(".next");

scrollContainer.addEventListener("wheel", (evt) => {
  evt.preventDefault();
  scrollContainer.scrollLeft += evt.deltaY;
});

nextButton.addEventListener("click", () => {
  scrollContainer.scrollLeft += 300;
});

backButton.addEventListener("click", () => {
  scrollContainer.scrollLeft -= 300;
});
</script>